#summary Describe checkout process

= Checkout process =

The extension tries to complete saved order (the order was created on add to cart) on ZetaPrints side after successful order checkout in M.

If saved order completion fails then the extension checks that saved order still exists on ZetaPrint side. This means that there was an error that prevented ZetaPrints from completing saved order (for example, error in sending request to ZetaPrints).
  * Saved order exists: try once more to complete saved order on ZetaPrints side. If it fails again then set status for order in M. to PROBLEMS.
  * Saved order doesn't exist: check if the final order (order after completion on ZetaPrints side) was created with the final order id (the id that was generated by the extension and was sent to ZetaPritns to track final order there).
    * If the final order exists on ZetaPrints then it means the order was process successfully on ZetaPrints side.
    * If the final order doesn't exist on ZetaPrints then it's a bug. Set status for order in M. to PROBLEMS and add message to ask contact admin with ZetaPrints.

= Up-sell products =
Upsell products with personalisation have automatic preview update based on the existing data in the user cache, if any.
The preview page checks if the referral came from Shopping Cart page, shows the default preview and tries to automatically update it while the user is making up his mind.
Clicking on a product link or Add to cart in the upsell area of a shopping cart has the same effect for products with personalisation - it takes them to the preview page.